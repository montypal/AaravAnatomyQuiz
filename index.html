<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ultimate Anatomy & Physiology Quiz</title>
    <style>
        :root { --primary: #6366f1; --secondary: #f43f5e; --accent: #10b981; --bg: #0f172a; --card: rgba(30, 41, 59, 0.95); --text: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: var(--text); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        #sidebar { width: 260px; background: #0b0f1a; border-right: 1px solid #334155; padding: 20px; display: flex; flex-direction: column; }
        .student-item { padding: 10px; margin: 5px 0; background: #1e293b; border-radius: 8px; cursor: pointer; display: flex; justify-content: space-between; border: 2px solid transparent; }
        .student-item.absent { opacity: 0.3; text-decoration: line-through; }
        .student-item.active-turn { border-color: var(--primary); background: #312e81; }
        #main { flex: 1; display: flex; align-items: center; justify-content: center; padding: 40px; position: relative; overflow-y: auto; }
        .slide { display: none; width: 100%; max-width: 800px; background: var(--card); padding: 40px; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .slide.active { display: block; }
        .tag { font-weight: bold; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; padding: 4px 8px; border-radius: 4px; margin-bottom: 15px; display: inline-block; }
        .tag-lesson { background: var(--primary); }
        .tag-quiz { background: var(--secondary); }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .option { background: #334155; padding: 15px; border-radius: 10px; cursor: pointer; border: 1px solid transparent; transition: 0.2s; }
        .option:hover { background: #475569; }
        .correct { background: var(--accent) !important; }
        .wrong { background: var(--secondary) !important; }
        .btn { background: var(--primary); color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 20px; }
        .turn-alert { background: var(--secondary); padding: 10px; border-radius: 8px; font-weight: bold; margin-bottom: 20px; text-align: center; }
    </style>
</head>
<body>

<div id="sidebar">
    <h3 style="margin-top:0">Class Tally</h3>
    <div id="roster"></div>
    <div id="progress" style="margin-top:auto; font-size:0.8rem; color:#94a3b8">Slide 1/54</div>
</div>

<div id="main">
    <div id="slide-container"></div>
</div>

<script>
    const studentNames = ["Aarav", "KangIn", "Alyssa", "Emogen", "Anhad", "Daani", "Maggie"];
    let students = studentNames.map(name => ({ name, score: 0, present: true }));
    let currentSlide = 0;
    let turnName = "";

    const data = [
        // 1-2: NREM 1-3 & REM
        { type: "lesson", title: "Sleep Stages", body: "Sleep is divided into NREM (Stages 1-3) and REM. NREM 3 is 'Slow Wave Sleep' (Delta waves). REM involves rapid eye movements, dreaming, and <b>muscle atonia</b> (paralysis)." },
        { type: "quiz", q: "In which sleep stage is the body virtually paralyzed to prevent acting out dreams?", opt: ["NREM 1", "NREM 2", "NREM 3", "REM"], a: 3 },
        
        // 3-4: Spindles/K-Complexes
        { type: "lesson", title: "Sleep Markers", body: "<b>Sleep Spindles</b> (bursts of high frequency) and <b>K-complexes</b> (large single waves) are the hallmark EEG features of <b>NREM Stage 2</b>." },
        { type: "quiz", q: "You see a Sleep Spindle on an EEG. Which stage is the patient in?", opt: ["NREM 1", "NREM 2", "NREM 3", "REM"], a: 1 },

        // 5-6: RAS
        { type: "lesson", title: "Reticular Activating System", body: "The <b>RAS</b> is a network in the brainstem that regulates sleep-wake transitions and conscious attention. It 'wakes up' the cortex." },
        { type: "quiz", q: "Severe damage to the Reticular Activating System (RAS) usually results in:", opt: ["Blindness", "Permanent Coma", "Inability to swallow", "Hyperactivity"], a: 1 },

        // 7-8: Colliculi
        { type: "lesson", title: "Superior & Inferior Colliculi", body: "The <b>Superior Colliculi</b> handle visual reflexes (tracking movement). The <b>Inferior Colliculi</b> handle auditory reflexes (turning toward sound)." },
        { type: "quiz", q: "Which midbrain structure helps you reflexively track a flying baseball with your eyes?", opt: ["Superior Colliculus", "Inferior Colliculus", "Pons", "Medulla"], a: 0 },

        // 9-10: Basal Nuclei
        { type: "lesson", title: "Basal Nuclei", body: "Consists of the <b>Caudate, Putamen, and Globus Pallidus</b>. They regulate the initiation and termination of movements." },
        { type: "quiz", q: "Which of these is NOT one of the three primary basal nuclei?", opt: ["Caudate", "Putamen", "Amygdala", "Globus Pallidus"], a: 2 },

        // 11-12: Dopamine Pathways
        { type: "lesson", title: "Dopamine Pathways", body: "<b>Nigrostriatal:</b> Motor control (Substantia Nigra to Basal Nuclei). <b>Mesolimbic:</b> Reward/Addiction (VTA to Nucleus Accumbens)." },
        { type: "quiz", q: "The 'Reward Pathway' often linked to addiction is the:", opt: ["Nigrostriatal", "Mesolimbic", "Corticospinal", "Spinothalamic"], a: 1 },

        // 13-14: Synaptic Transmission
        { type: "lesson", title: "Synaptic Transmission", body: "1. AP arrives. 2. <b>Voltage-gated Ca2+ channels</b> open. 3. Ca2+ influx causes vesicle fusion. 4. Neurotransmitter diffuses across the cleft." },
        { type: "quiz", q: "What ion MUST enter the synaptic terminal to trigger neurotransmitter release?", opt: ["Sodium", "Potassium", "Calcium", "Chloride"], a: 2 },

        // 15-16: EPSP/IPSP
        { type: "lesson", title: "EPSP vs IPSP", body: "<b>EPSP:</b> Local depolarization (usually Na+ in). <b>IPSP:</b> Local hyperpolarization (usually Cl- in or K+ out)." },
        { type: "quiz", q: "An IPSP (Inhibitory Postsynaptic Potential) makes the neuron:", opt: ["More likely to fire", "Less likely to fire", "Reach threshold", "Stay at -55mV"], a: 1 },

        // 17-18: Summation
        { type: "lesson", title: "Temporal vs Spatial Summation", body: "<b>Temporal:</b> One synapse firing repeatedly. <b>Spatial:</b> Multiple different synapses firing at once." },
        { type: "quiz", q: "Multiple different neurons firing simultaneously onto one postsynaptic neuron is:", opt: ["Temporal Summation", "Spatial Summation", "Axonal Transport", "Saltatory Conduction"], a: 1 },

        // 19-20: Synapse Types
        { type: "lesson", title: "Electrical vs Chemical", body: "<b>Electrical:</b> Gap junctions, direct ion flow, very fast. <b>Chemical:</b> Neurotransmitters, slower, but allows complex modulation." },
        { type: "quiz", q: "What structure allows ions to flow directly between cells in an electrical synapse?", opt: ["Synaptic Cleft", "Gap Junction", "Vesicle", "Receptor"], a: 1 },

        // 21-22: BBB
        { type: "lesson", title: "Blood-Brain Barrier", body: "Formed by tight junctions in capillaries and <b>Astrocytes</b>. It protects the brain from toxins but blocks many useful medicines." },
        { type: "quiz", q: "Which glial cell is the main 'helper' in maintaining the blood-brain barrier?", opt: ["Microglia", "Ependymal Cell", "Astrocyte", "Oligodendrocyte"], a: 2 },

        // 23-24: Reflex Arc
        { type: "lesson", title: "Reflex Arc", body: "Order: Receptor → Sensory (Afferent) Neuron → Integration Center (Spinal Cord) → Motor (Efferent) Neuron → Effector." },
        { type: "quiz", q: "In a reflex arc, the muscle that actually performs the movement is called the:", opt: ["Receptor", "Integrator", "Effector", "Afferent"], a: 2 },

        // 25-26: FAST Stroke
        { type: "lesson", title: "Stroke (FAST)", body: "Face drooping, Arm weakness, Speech difficulty, Time to call 911. Ischemic is a clot; Hemorrhagic is a bleed." },
        { type: "quiz", q: "What does the 'S' in the stroke recognition acronym FAST stand for?", opt: ["Seizure", "Strength", "Speech", "Stability"], a: 2 },

        // 27-28: Seizures
        { type: "lesson", title: "Seizure Types", body: "<b>Absence:</b> Brief 'staring' spell. <b>Tonic-Clonic:</b> Major convulsions and loss of consciousness." },
        { type: "quiz", q: "A child who suddenly stops talking and stares blankly for 10 seconds is likely having which seizure?", opt: ["Tonic-Clonic", "Absence", "Ischemic", "Atonic"], a: 1 },

        // 29-30: Retina Signal
        { type: "lesson", title: "Retina Layers", body: "Light passes through the layers to the back, but the signal flows: <b>Photoreceptor → Bipolar Cell → Ganglion Cell</b>." },
        { type: "quiz", q: "Which retinal cells have axons that exit the eye to form the Optic Nerve?", opt: ["Rods", "Cones", "Bipolar Cells", "Ganglion Cells"], a: 3 },

        // 31-32: Fovea/Blind Spot
        { type: "lesson", title: "Special Eye Zones", body: "<b>Fovea:</b> Only cones, high acuity. <b>Optic Disc:</b> No receptors, the 'Blind Spot'." },
        { type: "quiz", q: "Why is the Optic Disc called the blind spot?", opt: ["Too many rods", "It contains the lens", "It lacks photoreceptors", "It is behind the iris"], a: 2 },

        // 33-34: Humors
        { type: "lesson", title: "Aqueous vs Vitreous", body: "<b>Aqueous:</b> Front, watery. <b>Vitreous:</b> Back, gel-like, maintains eye shape." },
        { type: "quiz", q: "Which fluid is gel-like and helps hold the retina against the back of the eye?", opt: ["Aqueous Humor", "Vitreous Humor", "Endolymph", "Perilymph"], a: 1 },

        // 35-36: Accommodation
        { type: "lesson", title: "Accommodation", body: "The <b>Ciliary Muscles</b> contract to make the lens rounder so you can see objects that are CLOSE to you." },
        { type: "quiz", q: "To focus on a nearby book, the ciliary muscles contract to make the lens:", opt: ["Flatter", "Rounder/Thicker", "Smaller", "Opaque"], a: 1 },

        // 37-38: Sound Pathway (Middle)
        { type: "lesson", title: "The Middle Ear", body: "Sound vibrates the Tympanic Membrane → Malleus → Incus → Stapes → Oval Window." },
        { type: "quiz", q: "Which ossicle is the last in the chain and hits the Oval Window?", opt: ["Malleus", "Incus", "Stapes", "Cochlea"], a: 2 },

        // 39-40: Sound Pathway (Inner)
        { type: "lesson", title: "The Inner Ear", body: "Oval window vibrates fluid → Basilar membrane moves → <b>Hair cells</b> bend against the Tectorial membrane." },
        { type: "quiz", q: "Where are the actual auditory receptors (hair cells) located?", opt: ["Semicircular Canals", "Organ of Corti", "Tympanic Membrane", "Auricle"], a: 1 },

        // 41-42: Kinocilium Rule
        { type: "lesson", title: "Kinocilium Rule", body: "Bending hair cells <b>toward</b> the tallest hair (Kinocilium) = Depolarization. Bending <b>away</b> = Hyperpolarization." },
        { type: "quiz", q: "Bending the hair cell stereocilia TOWARD the Kinocilium causes:", opt: ["Depolarization", "Hyperpolarization", "Nothing", "Apoptosis"], a: 0 },

        // 43-44: Auditory Brain
        { type: "lesson", title: "Auditory Brain Pathway", body: "Cochlear Nerve → Inferior Colliculus (Midbrain) → <b>MGN</b> (Thalamus) → Temporal Lobe." },
        { type: "quiz", q: "Which Thalamic nucleus is the relay station for hearing?", opt: ["LGN", "MGN", "VPL", "Pons"], a: 1 },

        // 45-46: Smell/Thalamus
        { type: "lesson", title: "Smell (Olfaction)", body: "Olfactory receptors → Bulb → Cortex. <b>Smell is the ONLY sense that skips the Thalamus</b>." },
        { type: "quiz", q: "Which sense does NOT stop at the Thalamus before reaching the cerebral cortex?", opt: ["Vision", "Hearing", "Smell", "Touch"], a: 2 },

        // 47-48: Trigeminal Spice
        { type: "lesson", title: "Trigeminal Spice", body: "The 'heat' of a pepper is not a taste; it's a pain/temp signal carried by the <b>Trigeminal Nerve (CN V)</b>." },
        { type: "quiz", q: "Which cranial nerve carries the burning sensation of wasabi or chili peppers?", opt: ["Facial (VII)", "Glossopharyngeal (IX)", "Trigeminal (V)", "Vagus (X)"], a: 2 },

        // 49-50: RAAS Pathway
        { type: "lesson", title: "RAAS Pathway", body: "Renin (Kidney) → Angiotensin I → Angiotensin II (via ACE) → <b>Aldosterone</b> (Adrenal Cortex)." },
        { type: "quiz", q: "What is the end goal of the RAAS pathway?", opt: ["Lower Heart Rate", "Increase Blood Pressure", "Lower Blood Sugar", "Decrease Thirst"], a: 1 },

        // 51-52: GH Disorders
        { type: "lesson", title: "Growth Hormone", body: "<b>Gigantism:</b> Excess GH in children. <b>Acromegaly:</b> Excess GH in adults (thick bones, large hands/jaw)." },
        { type: "quiz", q: "A 40-year-old with thickening facial features and widening hands likely has:", opt: ["Gigantism", "Acromegaly", "Diabetes", "Goiter"], a: 1 },

        // 53-54: Leptin/Ghrelin
        { type: "lesson", title: "Hunger Hormones", body: "<b>Leptin:</b> From fat, says 'Full'. <b>Ghrelin:</b> From stomach, says 'Hungry'." },
        { type: "quiz", q: "Which hormone is released by the stomach when it is empty to trigger hunger?", opt: ["Leptin", "Ghrelin", "Insulin", "Glucagon"], a: 1 }
    ];

    function renderRoster() {
        const roster = document.getElementById('roster');
        roster.innerHTML = "";
        students.forEach((s, i) => {
            const div = document.createElement('div');
            div.className = `student-item ${s.present ? '' : 'absent'} ${s.name === turnName ? 'active-turn' : ''}`;
            div.innerHTML = `<span>${s.name}</span> <span>${s.score} pts</span>`;
            div.onclick = () => { students[i].present = !students[i].present; renderRoster(); };
            roster.appendChild(div);
        });
    }

    function renderSlides() {
        const container = document.getElementById('slide-container');
        data.forEach((item, i) => {
            const slide = document.createElement('div');
            slide.className = 'slide';
            slide.id = `slide-${i}`;
            if (item.type === 'lesson') {
                slide.innerHTML = `
                    <span class="tag tag-lesson">Lesson ${i+1}</span>
                    <h1 style="margin:0 0 20px 0">${item.title}</h1>
                    <p style="font-size:1.4rem; line-height:1.6">${item.body}</p>
                    <button class="btn" onclick="goNext()">Next: Quiz Time!</button>
                `;
            } else {
                slide.innerHTML = `
                    <span class="tag tag-quiz">Quiz ${i+1}</span>
                    <div id="turn-${i}" class="turn-alert"></div>
                    <h2 style="font-size:1.6rem">${item.q}</h2>
                    <div class="options-grid">
                        ${item.opt.map((o, idx) => `<div class="option" onclick="handleChoice(this, ${idx}, ${item.a}, ${i})">${o}</div>`).join('')}
                    </div>
                    <button id="btn-${i}" class="btn" style="display:none" onclick="goNext()">Continue</button>
                `;
            }
            container.appendChild(slide);
        });
    }

    function showSlide(idx) {
        document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
        document.getElementById(`slide-${idx}`).classList.add('active');
        document.getElementById('progress').innerText = `Slide ${idx + 1} / ${data.length}`;
        
        if (data[idx].type === 'quiz') {
            const activeOnes = students.filter(s => s.present);
            if (activeOnes.length) {
                turnName = activeOnes[Math.floor(Math.random() * activeOnes.length)].name;
                document.getElementById(`turn-${idx}`).innerText = `RANDOM TURN: ${turnName.toUpperCase()}`;
            }
        } else {
            turnName = "";
        }
        renderRoster();
    }

    window.handleChoice = (el, chosen, correct, idx) => {
        const opts = el.parentElement.querySelectorAll('.option');
        opts.forEach(o => o.style.pointerEvents = 'none');
        const s = students.find(s => s.name === turnName);
        if (chosen === correct) {
            el.classList.add('correct');
            if(s) s.score += 10;
        } else {
            el.classList.add('wrong');
            opts[correct].classList.add('correct');
            if(s) s.score -= 5;
        }
        document.getElementById(`btn-${idx}`).style.display = 'block';
        renderRoster();
    };

    window.goNext = () => {
        if (currentSlide < data.length - 1) {
            currentSlide++;
            showSlide(currentSlide);
        } else {
            alert("End of the Quiz! Great Job!");
        }
    };

    renderSlides();
    showSlide(0);
</script>

</body>
</html>
